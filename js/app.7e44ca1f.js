(function(){var t={3942:function(t,e,s){"use strict";s(2019);var a=s(4168),n=(s(3307),s(1392)),i=(s(2355),s(9233)),r=(s(8666),s(4951)),o=(s(1437),s(5641)),l=(s(1039),s(6458)),c=(s(7270),s(2476)),u=(s(8585),s(4119)),d=(s(9121),s(1914)),h=(s(5822),s(8521)),p=s(144),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view")],1)},f=[],v={},y=v,g=s(1001),w=(0,g.Z)(y,m,f,!1,null,null,null),_=w.exports,b=s(8345),Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:t.activeTitle,fixed:""}}),s("div",{staticClass:"main"},[s("keep-alive",[s("router-view")],1)],1),s("van-tabbar",{attrs:{route:""}},[s("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/layout/home"}},[t._v("首页")]),s("van-tabbar-item",{attrs:{icon:"search",replace:"",to:"/layout/search"}},[t._v("搜索")])],1)],1)},L=[],C={data(){return{activeTitle:this.$route.meta.title}},watch:{$route(){this.activeTitle=this.$route.meta.title}}},S=C,x=(0,g.Z)(S,Z,L,!1,null,"82069906",null),$=x.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"title"},[t._v("推荐歌单")]),s("van-row",{attrs:{gutter:"6"}},t._l(t.reList,(function(e){return s("van-col",{key:e.id,attrs:{span:"8"}},[s("van-image",{attrs:{width:"100%",height:"3rem",fit:"cover",src:e.picUrl}}),s("p",{staticClass:"song_name"},[t._v(t._s(e.name))])],1)})),1),s("p",{staticClass:"title"},[t._v("最新音乐")]),t._l(t.newList,(function(t){return s("SongItem",{key:t.id,attrs:{id:t.id,name:t.name,author:t.song.artists[0].name}})}))],2)},E=[],I=s(9669),T=s.n(I);T().defaults.baseURL="https://netease-cloud-music-api-five-lemon.vercel.app";var O=T();const V=t=>O({url:"/personalized",params:t}),z=t=>O({url:"/personalized/newsong",params:t}),j=t=>O({url:"/search/hot",params:t}),q=t=>O({url:"/cloudsearch",params:t}),P=t=>O({url:`/song/detail?ids=${t}`,method:"GET"}),U=t=>O({url:`/lyric?id=${t}`,method:"GET"});var D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell",{attrs:{center:"",title:t.name,label:t.author+" - "+t.name},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-icon",{attrs:{name:"play-circle-o",size:"0.6rem"},on:{touchstart:t.playFn}})]},proxy:!0}])})},F=[],M={props:{name:String,author:String,id:Number},methods:{playFn(){this.$router.push({path:"/play",query:{id:this.id}})}}},N=M,G=(0,g.Z)(N,D,F,!1,null,"32e58ab4",null),R=G.exports,H={data(){return{reList:[],newList:[]}},async created(){const t=await V({limit:6});console.log(t),this.reList=t.data.result;const e=await z({limit:20});console.log(e),this.newList=e.data.result},components:{SongItem:R}},W=H,A=(0,g.Z)(W,k,E,!1,null,"bdfa0a84",null),B=A.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-search",{attrs:{placeholder:"请输入搜索关键词",shape:"round"},model:{value:t.SearchValue,callback:function(e){t.SearchValue=e},expression:"SearchValue"}}),s("div",{staticClass:"search_wrap"},[s("p",{staticClass:"hot_title"},[t._v("热门搜索")]),s("div",{staticClass:"hot_name_wrap"},t._l(t.hotList,(function(e,a){return s("span",{key:a,staticClass:"hot_item",on:{click:function(s){return t.btn(e.first)}}},[t._v(t._s(e.first))])})),0)]),s("div",{staticClass:"search_wrap"},t._l(t.resultList,(function(t){return s("SongItem",{key:t.id,attrs:{name:t.name,author:t.ar[0].name,id:t.id}})})),1)],1)},K=[],Q={data(){return{SearchValue:"",hotList:[],resultList:[],timer:null}},async created(){const t=await j();console.log(t),this.hotList=t.data.result.hots},methods:{async btn(t){this.SearchValue=t;const e=await q({type:1,keywords:this.SearchValue});console.log(e),this.resultList=e.data.result.songs,setTimeout((()=>{clearTimeout(this.timer)}))}},watch:{SearchValue(t){if(clearTimeout(this.timer),0===t.length)return this.resultList=[];this.timer=setTimeout((async()=>{console.log(this.SearchValue);const e=await q({type:1,keywords:t});console.log(e),this.resultList=e.data.result.songs}),500)}},components:{SongItem:R}},X=Q,Y=(0,g.Z)(X,J,K,!1,null,"715c4a05",null),tt=Y.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play"},[s("div",{staticClass:"song-bg",style:"background-image: url("+(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0);"}),s("div",{staticClass:"header"},[s("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(e){return t.$router.back()}}})],1),s("div",{staticClass:"song-wrapper"},[s("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[s("div",{staticClass:"song-img"},[s("img",{staticStyle:{width:"100%"},attrs:{src:(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0",alt:""}})])]),s("div",{staticClass:"start-box",on:{click:t.audioStart}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),s("div",{staticClass:"song-msg"},[s("h2",{staticClass:"m-song-h2"},[s("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),s("div",{staticClass:"lrcContent"},[s("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),s("div",{staticClass:"needle",style:"transform: rotate("+t.needleDeg+");"})]),s("audio",{ref:"audio",attrs:{preload:"true",src:"https://music.163.com/song/media/outer/url?id="+t.id+".mp3"}})])},st=[],at={components:{[n.Z.name]:n.Z},name:"play",data(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg(){return this.playState?"-7deg":"-38deg"}},methods:{async getSong(){const t=await P(this.id);console.log(t),this.songInfo=t.data.songs[0];const e=await U(this.id),s=e.data.lrc.lyric;this.lyric=this._formatLyr(s),this.curLyric=this.lyric[0]},_formatLyr(t){let e=/\[.+?\]/g,s=t.match(e);console.log(s);let a=t.split(/\[.+?\]/).slice(1);console.log(a);let n={};return s.forEach(((t,e)=>{let s=60*t.split(":")[0].split("")[2],i="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];n[s+Number(i)]=a[e]})),console.log(n),n},audioStart(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric(){this.$refs.audio.addEventListener("timeupdate",(()=>{let t=Math.floor(this.$refs.audio.currentTime);this.lyric[t]?(this.curLyric=this.lyric[t],this.lastLy=this.curLyric):this.curLyric=this.lastLy}))}},mounted(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}},nt=at,it=(0,g.Z)(nt,et,st,!1,null,"39ed73cb",null),rt=it.exports;p.Z.use(b.Z);const ot=[{path:"/",redirect:"/layout"},{path:"/layout",component:$,redirect:"/layout/home",children:[{path:"home",component:B,meta:{title:"首页"}},{path:"search",component:tt,meta:{title:"搜索"}}]},{path:"/play",component:rt}],lt=new b.Z({routes:ot});var ct=lt,ut=s(629);p.Z.use(ut.ZP);var dt=new ut.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});s(6801);p.Z.use(h.Z),p.Z.use(d.Z),p.Z.use(u.Z),p.Z.use(c.Z),p.Z.use(l.Z),p.Z.use(o.Z),p.Z.use(r.Z),p.Z.use(i.Z),p.Z.use(n.Z),p.Z.use(a.Z),p.Z.config.productionTip=!1,new p.Z({router:ct,store:dt,render:t=>t(_)}).$mount("#app")},6801:function(){(function(t,e){var s=e.documentElement,a=t.devicePixelRatio||1;function n(){e.body?e.body.style.fontSize=12*a+"px":e.addEventListener("DOMContentLoaded",n)}function i(){var t=s.clientWidth/10;s.style.fontSize=t+"px"}if(n(),i(),t.addEventListener("resize",i),t.addEventListener("pageshow",(function(t){t.persisted&&i()})),a>=2){var r=e.createElement("body"),o=e.createElement("div");o.style.border=".5px solid transparent",r.appendChild(o),s.appendChild(r),1===o.offsetHeight&&s.classList.add("hairlines"),s.removeChild(r)}})(window,document)}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,i){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],i=t[u][2];for(var o=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,n,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,i,r=a[0],o=a[1],l=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var u=l(s)}for(e&&e(a);c<r.length;c++)i=r[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(u)},a=self["webpackChunkyxmusic"]=self["webpackChunkyxmusic"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(3942)}));a=s.O(a)})();
//# sourceMappingURL=app.7e44ca1f.js.map